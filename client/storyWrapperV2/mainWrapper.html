<template name="mainWrapper">
    <link href="/assets/externalcss/theme.css" rel="stylesheet" type="text/css" />
    <link href="/assets/externalcss/mainWrapper.css" rel="stylesheet" type="text/css" />

    <div id="main-page-desktop" class="hidden-sm high emerald-default htmls htmls_panels story-page bg-black" >
      <img id="story-nameplate-cover" src="{{getNamePlate}}" alt="" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index: 100000;" />
        <!--<div id="blurmebro"></div>-->
        <div id="node-dialog-container"></div>

        <div class="main-story-content" id="main-wrapper-page">
            <div class="oc-xs-squeeze-push oc-sm-squeeze-push oc-md-squeeze-push oc-lg-squeeze-push
     modal-blur-content" style="  height: 100vh;">

                <div id="oc-wrapper" class="oc-wrapper
       oc-lg-partial-left oc-md-partial-left oc-sm-partial-left oc-xs-partial-left
       oc-lg-left-squeeze oc-md-left-squeeze oc-sm-left-squeeze oc-xs-left-squeeze
       oc-lg-right-push oc-md-right-push oc-sm-right-push oc-xs-right-push oc-lg-hidden-right
       ">

                    <div class="oc-push oc-scroll">
                        {{>wrapperSideBar}}

                        <div id="main-oc-container" class="oc-container" style="background-color: {{getBackColor}}">

                          <a style="background: black;border-radius: 50%;position: absolute;right: 1%;top: 1%;cursor: pointer;z-index: 1;" id="oc-right-toggle" href="#oc-wrapper" class="btn-nav sidebar-toggle-right" rel="tooltip" title="" data-placement="bottom" data-container="#oc-right-toggle-container" data-toggle="offcanvas" data-control="right" data-states="open,hidden" data-persist="lg,md,sm" data-original-title="Toggle chat">

                              <i class="fa fa-lg fa-comments has-corner-badge">
                                  <span class="badge badge-corner badge-corner-top-right badge-info" style="background:red">3</span>
                              </i>
                          </a>
                            <div id="story-wrapper">

                              <!-- HTML for games -->
                              {{#with game}}
                                <div class="game-container" style="  position: absolute;
  left: {{gamebox.landscape.left}}%;
  top: {{gamebox.landscape.top}}%;
  height: {{gamebox.landscape.height}}%;
  width: {{gamebox.landscape.width}}%;
  z-index: 20000;">
                                    <iframe src="/assets/testgames/quizspin/index.html" height="100%" width="100%" style='border:none;'></iframe>
                                </div>
{{/with}}


                                <div id="story-content" style="background-image:url('{{getBackImg}}')">
                                  <!-- HTML for HUD -->
                                    <div class="hud-container" style="width: 100%;height: 100%">
                                      {{#with hud}}
                                        <div id="hud-img" style="position: absolute;top:{{landscape.top}}%;left: {{landscape.left}}%;width: {{landscape.width}}%">
                                            <img src='{{getHudImage}}' style="width: 100%;position: relative;z-index: 1">
                                        </div>
                                        <div id="user-profile" style="width: {{picturebox.landscape.width}}%;position: absolute;top: {{picturebox.landscape.top}}%;left: {{picturebox.landscape.left}}%;z-index: 0;">
                                            <img src="/assets/images/user.jpg" style="width: 100%;border-radius: 50%">
                                        </div>
                                        <span id="points-container" style="position: absolute;width: {{pointbox.landscape.width}}%;top: {{pointbox.landscape.top}}%;left: {{pointbox.landscape.left}}%;z-index: 1;text-align: center;font-size: 1.4em;">1000</span>
                                        <span id="credits-container" style="  position: absolute;width: {{creditbox.landscape.width}}%;height: 3%;top: {{creditbox.landscape.top}}%;left: {{creditbox.landscape.left}}%;z-index: 1;text-align: center;font-size: 1.4em;">3459</span>
                                        {{/with}}
                                    </div>
                                    <div id="story-nodes">
                                        {{#each nodes}}
                                            <a href="#" tabindex="0" data-toggle="popover" title="{{title}}" data-content="{{getNodeUrl photo}}{{description}}{{getNodeStatus sequence}}" data-placement="{{getPlacement landscape.px}}" class="story-node {{getNodeStatusClass sequence}} " id="story-node-{{sequence}}" seq="{{sequence}}" style="top:{{getPrecTop landscape.py}}%;left:{{getPrecLeft landscape.px}}%;width:{{landscape.width}}%">
                                                <img src="{{getNodeStatusPic sequence}}" alt="">
                                            </a>
                                        {{/each}}

                                    </div>
                                </div>
                                <div id="story-overlays"></div>
                            </div>

                            <img id="story-presenter" src="{{getStoryPresenter}}" alt="" />
                            <!-- <img id="story-nameplate" src="{{getNamePlate}}" alt="" /> -->
                            <!-- <img id="story-nameplate" src="{{generateStoryImagePath wrapperJson.imgsrc wrapperJson.nameplate.image}}" alt="" style="width:{{wrapperJson.nameplate.landscape.width}}%;left:{{wrapperJson.nameplate.landscape.left}}%;top:{{wrapperJson.nameplate.landscape.top}}%;" />
                            <div id="notifications-splash"></div> -->
                            
                        </div>


                    </div>
                    {{>chatWrapper}}

                </div>


                <!-- Needed by BSE.Mq.screen() helper in utils.js -->
                <div id="mq"></div>

                <!-- Needed by EmVars helper in _emerald.js -->
                <div id="emvars"></div>

            </div>
        </div>
    </div>


    <!-- Badges Modal -->

    <!-- /modal -->

    <!-- Notifications Modal -->

    <!-- /modal -->

    <!-- Leaderboard Modal -->

    <div id="main-page-tablet" class="hidden-lg hidden-md visible-sm">
        <div id="portrait-text-block">
            <p id="portrait-view-text">Amplayfier is not currently available in portrait view, <br> please turn your device to change it to landscape mode.</p>
        </div>
    </div>

</template>
